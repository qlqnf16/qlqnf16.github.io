---
layout: post

title: "HTTP 프로토콜"

categories: [computer-science, network]

date: 2019-10-04 19:39
---

HTTP(Hypertext Transfer Protocol) 이란?

---

인터넷 상에서 데이터를 주고받기 위해 사용하는 **서버/클라이언트 모델**의 프로토콜이다. HTTP는 OSI 7계층 중 **응용계층**에 위치한다. HTML, 이미지, 동영상, 음성 데이터 등 **모든 종류의 데이터**를 전송할 수 있도록 설계돼있다. HTTP는 일반적으로 **TCP/IP** 통신 위에서 동작하며 기본 포트번호는 **80**번이다.

## 서버/클라이언트 모델

HTTP는 서버/클라이언트 모델의 프로토콜이다. 즉, **클라이언트에서 요청(request)**을 보내면 **서버가 응답(response)**하는 방식으로 작동한다는 것을 말한다. 서버와 클라이언트는 개별 메세지를 교환하며 통신하는데, 요청과 응답 사이에는 **프록시** 등의 개체가 존재한다.

![](/assets/images/http.png)

**클라이언트**란 요청을 보내는 쪽으로, 일반적으로 웹에서는 **브라우저**를 의미한다. 클라이언트는 URI를 이용해 서버에 접속하고 데이터를 요청할 수 있다. 브라우저는 웹페이지를 구성하기 위한 리소스들을 요청하고, 응답받은 데이터를 재구성해 화면에 표시한다. 최초 요청 외에도 추가적으로 요청을 보내고, 그에 따라 페이지를 갱신할 수 있다.

**서버**는 클라이언트의 요청을 받아 요청을 해석하고 데이터를 전송하는 역할을 한다. 원격지의 서버 컴퓨터를 의미하며, **Apache, nginx** 등의 서버 소프트웨어로 서비스된다.

cf) **프록시**는 서버와 클라이언트 사이의 통신을 중계하는 중간개체이다. 프록시는 **캐싱, 필터링, 로드 밸런싱, 인증, 로깅** 등 다양한 역할을 수행할 수 있다.

### stateless & connectionless

HTTP 에서 서버와 클라이언트는 한 번의 요청과 응답을 완료하면 **바로 연결을 끊는다** (connectionless). 연결이 끝나는 순간 서버와 클라이언트의 통신은 끝나며 **상태정보를 저장하지 않는다** (stateless).

##### 장점

- 불특정다수를 대상으로 하는 서비스에 적합하다.
- 연결이 계속 유지되는 것이 아니기 때문에, 클라이언트와 서버간의 최대 연결수보다 훨씬 더 많은 요청을 처리할 수 있다.

##### 단점

- stateless라는 특징 때문에 상태정보를 저장할 수 없다. 예를 들어 로그인 요청을 완료하더라도, 로그인 정보를 유지할 수 없는 것이다. 이를 보완하기 위해 \* **쿠키**와 **세션\***을 이용하고 있다.

## HTTP 메시지

### HTTP request

![](https://mdn.mozillademos.org/files/13687/HTTP_Request.png)

- **메소드**(Method): 클라이언트가 수행하고자 하는 동작을 정의함. (`GET`, `POST`, `PUT`, `DELETE`, `HEAD`, `OPTIONS` ...)

- **경로**(Path): 요청하는 자원의 위치를 명시하는 URI

- **HTTP 프로토콜의 버전**: HTTP/1.1 또는 HTTP/2

- **헤더**(Headers): 요청하는 자원이나 클라이언트에 대한 추가 정보를 전달한다. Host, Accept-Language, Connection: keep-alive 등이 포함된다.

### HTTP response

![](https://mdn.mozillademos.org/files/13691/HTTP_Response.png)

- **상태 코드**(Status code): 요청의 성공 여부와 그 이유를 나타냄 (ex. 2XX-성공, 4XX-클라이언트 에러, 5XX-서버 에러 ...)

- **상태 메시지**(Status message): 상태 코드를 설명하는 짧은 메세지

- **헤더**(Headers): 보내는 자원이나 서버에 대한 추가 정보를 전달한다. Server, Content-Type 등.

## HTTP / HTTPS

HTTP는 클라이언트와 서버의 통신에서 데이터를 평문으로 전송하므로, 보안에 취약하다는 단점이 있다. 따라서 이를 해결하기 위해 클라이언트와 서버가 먼저 **암호화된 통신 채널**을 설정하고, 그를 통해 평문 데이터를 전송해 정보 유출을 막는 **HTTPS(HTTP Secure)**가 도입되었다.

HTTPS 통신은 일반적으로 **공개키 암호화**(=비대칭키 암호화) 방식을 사용한다. 서버는 공개키를 모두가 접근할 수 있는 공개키 저장소에 등록하고, 개인키를 가지고 있는다. 클라이언트가 공개키를 이용해 암호화된 요청을 보내면, 서버는 개인키를 이용해 요청을 해석하고 다시 개인키를 이용해 암호화한 데이터를 보낸다. 클라이언트는 공개키를 이용해 응답받은 데이터를 복호화해서 사용할 수 있다. 이 과정은 **클라이언트가 받은 응답이** 다른 공격자가 아니라 **서버에서 온 것임을 보장**할 수 있다.

암호화 채널은 **SSL**(Secure Socket Layer)나 **TLS**(Transport Layer Security) 프로토콜을 이용해 만든다. 이들은 전송계층과 응용계층 사이에서 안전한 보안 계층을 형성해주는 역할을 한다.

HTTPS는 HTTP에 비해 안전하다는 장점이 있다. 그러나 **암호화 과정은 웹 서버에 부하**를 일으키고, 인증서를 발급하는 것 또한 **높은 비용**이 든다. 따라서 모든 서비스가 HTTPS를 사용하지는 않으며, 누구나 접근해도 괜찮은 정보는 HTTP를, 은행이나 결제 등 보안이 중요한 것은 HTTPS를 이용해 서비스한다.

#### 참고자료

> - [HTTP 개요](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview)
> - [HTTP와 HTTPS의 이해와 차이점](https://jeong-pro.tistory.com/89)
> - [HTTP Headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers)
